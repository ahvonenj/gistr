var exportDatabase=function(e){if(void 0===store.get("gists"))return console.log("No database to export");store.get("gists");if(e.f||e.tofile)consoleLog("Exporting local database to a file",e),fileExists(__dirname+"/.gistr_storage",function(e,o){if(e)throw e;o?(fs.createReadStream(__dirname+"/.gistr_storage").pipe(fs.createWriteStream(process.cwd()+"/gistr-db-export.gs")),console.log("Database exported as a file to your cwd. Keep it safe somewhere."),console.log("NOTE: The database-file might include your Github access-token!"),process.exit(0)):(console.log("Storage file not found"),process.exit(1))});else{consoleLog("Exporting local database as a gist",e),void 0===store.get("access-token")&&(console.log("Database can only be exported as a gist, if access-token in set"),process.exit(1));var o={_:[null,__dirname+"/.gistr_storage"],d:"gstr database export (WARNING: This gist contains your Github access-token!)"};createGist(o,!0,function(e){var o=e.id;console.log("Database saved as a gist to your Github profile"),console.log("To import database, save and use this gist ID or use the gisted file in your Github profile"),console.log("Gist ID: "+o)})}},importDatabase=function(e){if(e.id)pullGistById(e.id,e);else{if(!e.f&&!e.file)return console.log('Command needs to be called with --id="<gist id>" or --file="<pathToFile>"');e.f||e.file||process.cwd()}};exports.wrap=function(e){e.exportDatabase=exportDatabase,e.importDatabase=importDatabase};